<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{{ url_for('static', path='css/style.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <header class="custom-header">
        <div class="container">
            <div class="logo">
                <a href="/"><img src="{{ url_for('static', path='logo.png') }}"></a><br>
            </div>
            <nav>
                <ul>
                    <li style="margin-right: 20px;"><a href="/chat">Чат</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container mt-5">
        <div class="row">
            <!-- Таблица -->
            <div class="col-md-6">
                <div class="scrollable-table">
                    <table class="table table-sm table-striped table-hover table-bordered border-dark">
                        <thead>
                            <tr>
                                <th scope="col" width="1%">№</th>
                                <th scope="col" width="500px">Название документа</th>
                                <th scope="col" width="10%">Размер</th>
                            </tr>
                        </thead>
                        <tbody class="table-group-divider" id="documentTable">
                            <!-- Данные будут загружаться через JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Предпросмотр документа -->
            <div class="col-md-6">
                <div class="preview-container">
                    <iframe id="preview" src="{{ url_for('static', path='Коллективный договор.pdf') }}" frameborder="0"></iframe>
                </div>
            </div>
        </div>
    </div>
    <script>
        // URL вашего API для получения документов
        const apiUrl = 'https://example.com/api/documents'; // Замените на ваш URL

        // Функция для загрузки списка документов
        async function loadDocuments() {
            const documentTable = document.getElementById('documentTable');
            documentTable.innerHTML = ''; // Очищаем таблицу перед добавлением данных

            try {
                const response = await fetch(apiUrl);
                const documents = await response.json();

                documents.forEach((doc, index) => {
                    documentTable.innerHTML += `
                        <tr>
                            <th scope="row">${index + 1}</th>
                            <td><a href="#" onclick="previewDocument('${doc.id}')">${doc.name}</a></td>
                            <td>${doc.size}</td>
                        </tr>
                    `;
                });
            } catch (error) {
                console.error('Загрузка...:', error);
                documentTable.innerHTML = '<tr><td colspan="3">Загрузка...</td></tr>';
            }
        }
        function previewDocument(docId) {
            // Заменить на URL для просмотра документа
            const previewUrl = `https://example.com/api/documents/${docId}`;
            document.getElementById('preview').src = previewUrl;
        }
        window.onload = loadDocuments;
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
